<!-- File: login.html -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <style>
        form input {
            padding: 1rem 2rem;
            background-color: white;
            border: 2px solid inherit;
            outline: none;
        }

        #login-form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .logo-img {
            height: 8rem;
            width: auto;
        }

        .login-container {
            margin: 0 auto;
            max-width: 450px;
        }

        .error-message {
            color: var(--error-color);
            padding-bottom: 0.5rem;
            font-size: 0.8rem;
            display: none;
            /*hidden by default*/
        }
    </style>

    <title>Login</title>
</head>

<body>
    <div class="login-container" style="margin-top: 2rem;">
        <a href="login.html"
            style="display: grid;place-content: center;padding: 1rem;height: 2rem;width: 2rem;border-radius: 50%; border: 1px solid var(--error-color)">
            <ion-icon name="chevron-back" style="color: var(--error-color);"></ion-icon>
        </a>
        <h1 style="margin: 1rem 0;">Reset Password</h1>
        <p style="margin: 1rem 0;">Enter your Email address and we will send you instructions to reset your password.
        </p>
        <div class="error-message" id="error-message"></div>
        <form id="forgot-password-form">
            <input type="email" id="email" name="email" placeholder="Email Address">
            <button type="submit" style="margin-top: 2rem;">Request reset link</button>
        </form>
    </div>
    <script src="app.js"></script>
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <script>

        document.getElementById('forgot-password-form').addEventListener('submit', forgotPassword);



        const nodemailer = require('nodemailer');
        const crypto = require('crypto');

        // Configure nodemailer transport
        const transporter = nodemailer.createTransport({
            service: 'Gmail', // Or any other email service provider
            auth: {
                user: 'your-email@gmail.com', // Replace with your email
                pass: 'your-email-password', // Replace with your email password or app-specific password
            },
        });

        // Function to send a verification email
        function sendVerificationEmail(userEmail, userId) {
            // Generate a unique verification token
            const verificationToken = crypto.randomBytes(32).toString('hex');

            // Verification URL
            const verificationLink = `http://your-domain.com/verify-account?token=${verificationToken}&userId=${userId}`;

            // Email options
            const mailOptions = {
                from: 'your-email@gmail.com',
                to: userEmail,
                subject: 'Account Verification',
                html: `
      <h1>Welcome to Our Platform!</h1>
      <p>Click the link below to verify your email and activate your account:</p>
      <a href="${verificationLink}">Verify Your Account</a>
      <p>If you didnâ€™t create an account, please ignore this email.</p>
    `,
            };

            // Send email
            transporter.sendMail(mailOptions, (error, info) => {
                if (error) {
                    console.error('Error sending email:', error);
                } else {
                    console.log('Email sent:', info.response);
                    // Store the verification token and userId in your database for later verification
                }
            });
        }

        // Example usage
        sendVerificationEmail('newuser@example.com', '12345'); // Replace with the actual user's email and ID


    </script>
</body>

</html>